\documentclass[all.tex]{subfiles}
\begin{document}
\ignorespaces
\parindent 0pt

\par Since $W$ is a subspace of $V$, one can choose an orthonormal basis
$\ket{0}, \ket{1}, \ldots, \ket{d-1}$ for $W$ and then extend it via
Gram-Schmidt into an orthonormal basis $\ket{0}, \ldots, \ket{k-1}$ for $V$,
with $d < k$.

\begin{align}
A = I_V A I_W &= \left( \sum_{i = 0}^{k - 1}{\ket{i} \bra{i}} \right) A \left(
\sum_{j = 0}^{d - 1}{\ket{j} \bra{j}} \right) \\
&= \sum_i{\sum_j{\braket{i|A|j} \ket{i} \bra{j}}}
\end{align}

Regrouping the sum:

\begin{align*}
\ket{u_0} &= \left( \sum_i{\braket{i|A|0}} \right) \ket{0} \\
\ket{u_1} &= \left( \sum_i{\braket{i|A|1}} \right) \ket{1} \\
&\vdots \\
\ket{u_{d-1}} &= \left( \sum_i{\braket{i|A|d-1}} \right) \ket{d-1} \\
A &= \sum_{j = 0}^{d - 1}{\ket{u_j} \bra{j}}
\end{align*}

Each $\ket{u_i}$ can be viewed as a column in the matrix representations of $A$.

\par We also had $\braket{x|A^* A|y} = \braket{x|y}$, so $A^* A$ is necessarily
the identity. In other words,

\begin{align}
A^* A &= \left( \sum_{m = 0}^{d - 1}{\ket{m} \bra{u_m}} \right) \left(
\sum_{n = 0}^{d - 1}{\ket{u_n} \bra{n}} \right) \\
&= \sum_m{\sum_n{\ket{m} \braket{u_m|u_n} \bra{n}}} \\
&= I \\
\sum_m{\sum_n{\ket{m} \braket{u_m|u_n} \bra{n}}} &= \sum_m{\sum_n{\delta_{mn}
\ket{m} \bra{n}}} \\
\braket{u_m|u_n} &= \delta_{mn}
\end{align}

This means that $\{\ket{u_i}\}_{i = 0}^{d - 1}$ is necessarily an orthonormal
subset of $V$. Since $V$ is a $k$-dimensional space, we can once again employ
Gram-Schmidt to derive the remaining $\ket{u_d}, \ldots, \ket{u_{k-1}}$ so that
the entire set $\{\ket{u_i}\}_{i = 0}^{k - 1}$ is an orthnormal basis of $V$.
Using this, we can form unitary extension of $A$:

\begin{align}
A' &= \sum_{j = 0}^{k - 1}{\ket{u_j} \bra{j}}
\end{align}
\end{document}
